{"ast":null,"code":"var _jsxFileName = \"/home/sohaib/Desktop/MERN/Evaluation/GMAIL OAUTH/src/components/SentEmails/SentEmails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport InboxIDs from \"../api/InboxList\";\nimport { selectUser } from \"../../features/userSlice\";\nimport { sentEmailFetchedDone, APIUserData } from \"../../features/dataSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Checkbox, IconButton } from \"@material-ui/core\";\nimport StarBorderOutlinedIcon from \"@material-ui/icons/StarBorderOutlined\";\nimport LabelImportantOutlinedIcon from \"@material-ui/icons/LabelImportantOutlined\";\nimport parseMessage from \"gmail-api-parse-message\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SentEmails = () => {\n  _s();\n\n  const user = useSelector(selectUser);\n  const [sentEmail, SetSentEmail] = useState([]);\n  const [sentEmailFetched, setSentEmailFetched] = useState([]);\n  const dispatch = useDispatch();\n  const sentEmailsToDisplay = useSelector(APIUserData);\n  console.log(\"ðŸš€ ~ file: SentEmails.js ~ line 17 ~ SentEmails ~ sentEmailsToDisplay\", sentEmailsToDisplay);\n  useEffect(() => {\n    if (sentEmailFetched.length > 0) {\n      sentEmailFetched.map(item => {\n        var parsedMessage = parseMessage(item);\n        const condition = sentEmail.find(array => array.id === item.id);\n\n        if (condition) {\n          return;\n        } else {\n          const arr = {\n            id: parsedMessage.id,\n            to: parsedMessage.headers.to,\n            subject: parsedMessage.headers.subject,\n            description: parsedMessage.snippet,\n            timestamp: parsedMessage.headers.date\n          };\n          return SetSentEmail(sentEmail => [...sentEmail, arr]);\n        }\n      });\n    }\n\n    dispatch(sentEmailFetchedDone(sentEmail));\n  }, [sentEmailFetched]);\n  useEffect(() => {\n    InboxIDs(user).get(`/${user.user_id}/messages?labelIds=SENT`).then(function (response) {\n      response.data.messages.map(async item => {\n        await InboxIDs(user).get(`/${user.user_id}/messages/${item.id}`).then(res => {\n          setSentEmailFetched(sentEmailFetched => [...sentEmailFetched, res.data]);\n        }).catch(error => {\n          console.error(error);\n        });\n      });\n    }, function (err) {\n      console.error(\"Execute error\", err);\n    });\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"emailRow\",\n      children: sentEmailsToDisplay.sentEmailFetchedDone.map(_ref => {\n        let {\n          id,\n          to,\n          subject,\n          description,\n          timestamp\n        } = _ref;\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"emailRow-options\",\n              children: [/*#__PURE__*/_jsxDEV(Checkbox, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                children: /*#__PURE__*/_jsxDEV(StarBorderOutlinedIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                children: /*#__PURE__*/_jsxDEV(LabelImportantOutlinedIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"emailRow-title\",\n              children: to\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"emailRow-message\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [subject, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"emailRow-description\",\n                  children: [\" \", \"- \", description]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"emailRow-time\",\n              children: timestamp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this)]\n          }, id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this)\n        }, void 0, false);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SentEmails, \"9KBGQ8Sx1/ME45kYDI7UlBjnlzE=\", false, function () {\n  return [useSelector, useDispatch, useSelector];\n});\n\n_c = SentEmails;\nexport default SentEmails;\n\nvar _c;\n\n$RefreshReg$(_c, \"SentEmails\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","InboxIDs","selectUser","sentEmailFetchedDone","APIUserData","useSelector","useDispatch","Checkbox","IconButton","StarBorderOutlinedIcon","LabelImportantOutlinedIcon","parseMessage","SentEmails","user","sentEmail","SetSentEmail","sentEmailFetched","setSentEmailFetched","dispatch","sentEmailsToDisplay","console","log","length","map","item","parsedMessage","condition","find","array","id","arr","to","headers","subject","description","snippet","timestamp","date","get","user_id","then","response","data","messages","res","catch","error","err"],"sources":["/home/sohaib/Desktop/MERN/Evaluation/GMAIL OAUTH/src/components/SentEmails/SentEmails.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport InboxIDs from \"../api/InboxList\";\nimport { selectUser } from \"../../features/userSlice\";\nimport { sentEmailFetchedDone, APIUserData } from \"../../features/dataSlice\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Checkbox, IconButton } from \"@material-ui/core\";\nimport StarBorderOutlinedIcon from \"@material-ui/icons/StarBorderOutlined\";\nimport LabelImportantOutlinedIcon from \"@material-ui/icons/LabelImportantOutlined\";\nimport parseMessage from \"gmail-api-parse-message\";\nconst SentEmails = () => {\n  const user = useSelector(selectUser);\n  const [sentEmail, SetSentEmail] = useState([]);\n\n  const [sentEmailFetched, setSentEmailFetched] = useState([]);\n  const dispatch = useDispatch();\n  const sentEmailsToDisplay = useSelector(APIUserData);\n  console.log(\n    \"ðŸš€ ~ file: SentEmails.js ~ line 17 ~ SentEmails ~ sentEmailsToDisplay\",\n    sentEmailsToDisplay\n  );\n\n  useEffect(() => {\n    if (sentEmailFetched.length > 0) {\n      sentEmailFetched.map((item) => {\n        var parsedMessage = parseMessage(item);\n\n        const condition = sentEmail.find((array) => array.id === item.id);\n        if (condition) {\n          return;\n        } else {\n          const arr = {\n            id: parsedMessage.id,\n            to: parsedMessage.headers.to,\n            subject: parsedMessage.headers.subject,\n            description: parsedMessage.snippet,\n            timestamp: parsedMessage.headers.date,\n          };\n          return SetSentEmail((sentEmail) => [...sentEmail, arr]);\n        }\n      });\n    }\n    dispatch(sentEmailFetchedDone(sentEmail));\n  }, [sentEmailFetched]);\n\n  useEffect(() => {\n    InboxIDs(user)\n      .get(`/${user.user_id}/messages?labelIds=SENT`)\n\n      .then(\n        function (response) {\n          response.data.messages.map(async (item) => {\n            await InboxIDs(user)\n              .get(`/${user.user_id}/messages/${item.id}`)\n              .then((res) => {\n                setSentEmailFetched((sentEmailFetched) => [\n                  ...sentEmailFetched,\n                  res.data,\n                ]);\n              })\n              .catch((error) => {\n                console.error(error);\n              });\n          });\n        },\n        function (err) {\n          console.error(\"Execute error\", err);\n        }\n      );\n  }, [user]);\n\n  return (\n    <div>\n      <div className=\"emailRow\">\n        {sentEmailsToDisplay.sentEmailFetchedDone.map(\n          ({ id, to, subject, description, timestamp }) => (\n            <>\n              <div key={id}>\n                <div className=\"emailRow-options\">\n                  <Checkbox />\n                  <IconButton>\n                    <StarBorderOutlinedIcon />\n                  </IconButton>\n                  <IconButton>\n                    <LabelImportantOutlinedIcon />\n                  </IconButton>\n                </div>\n                <h3 className=\"emailRow-title\">{to}</h3>\n                <div className=\"emailRow-message\">\n                  <h4>\n                    {subject}{\" \"}\n                    <span className=\"emailRow-description\">\n                      {\" \"}\n                      - {description}\n                    </span>\n                  </h4>\n                </div>\n                <p className=\"emailRow-time\">{timestamp}</p>\n              </div>\n            </>\n          )\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SentEmails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}